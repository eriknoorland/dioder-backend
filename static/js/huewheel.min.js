/*
 *	Hue Wheel 1.2.1
 *	(c) 2013-2016 Epistemex.com
 *	License: MIT
*/
function HueWheel(ap,ao){var ai=this,v=(typeof ap==="string")?document.getElementById(ap):ap,am=navigator.msPointerEnabled,e=document.createElement("canvas"),q=e.getContext("2d"),h=e.style,aq=Math.PI,s=aq/180,au=180/aq,ar=2*aq,u=0.5*aq,t=250,i=t*0.5,aJ=!0,R=!0,aN=!0,aO=!0,H=0,aF=1,ae=0.5,an=0,aM=!0,K=1,aE=1,ab=1,J=33,I=34,aD=37,aC=39,aa=38,Z=40,V=10,aK=Math.max(t*0.12,3),ah=aN?Math.max(t*0.05,3):0,W=0.1,aI=0,O=!1,o=0.8,m=2,n="#000",M="#fff",ac="#fff",N="#777",ad="#777",Y=!1,p=!0,a=!0,av,aw,ag,af,L,X,Q=!1,S=!1,T=!1,aL,aS,aT,at,w,c,f=e.addEventListener.bind(e),aR=window.addEventListener.bind(window);ao=ao||{};Object.keys(ao).forEach(function(g){var l=ao[g];switch(g){case"diameter":t=+l;i=t*0.5;break;case"hue":H=+l%360;break;case"colorSpace":R=l==="hsl";break;case"changeLightness":aN=!!l;ah=aN?Math.max(t*0.05,3):0;break;case"changeSaturation":aO=!!l;break;case"saturation":aF=+l;break;case"lightness":ae=+l;break;case"useKeys":aM=!!l;break;case"hueKeyDelta":K=+l;break;case"saturationKeyDelta":aE=+l;break;case"lightnessKeyDelta":ab=+l;break;case"hueKeyCodeUp":J=+l;break;case"hueKeyCodeDown":I=+l;break;case"saturationKeyCodeUp":aD=+l;break;case"saturationKeyCodeDown":aC=+l;break;case"lightnessKeyCodeUp":aa=+l;break;case"lightnessKeyCodeDown":Z=+l;break;case"shiftKeyFactor":V=+l;break;case"thicknessHue":aK=+l;break;case"thicknessLuma":ah=+l;break;case"hueKnobSize":W=+l;break;case"shadowBlur":aI=+l;break;case"hueKnobShadow":O=!!l;break;case"showColorSpot":aJ=!!l;break;case"tabable":a=!!l;break;case"colorSpotWidth":o=+l;break;case"colorSpotBorder":m=+l;break;case"colorSpotBorderColor":n=""+l;break;case"hueKnobColor":M=""+l;break;case"lightnessKnobColor":ac=""+l;break;case"hueKnobColorSelected":N=""+l;break;case"lightnessKnobColorSelected":ad=""+l;break;case"lightnessRingClickable":Y=!!l;break;case"ctrlLock":p=!!l;break;case"rgb":if(Array.isArray(l)&&l.length===3){var b=R?aA(l[0],l[1],l[2]):aB(l[0],l[1],l[2]);H=b.h;aF=b.s;ae=b.l;aP()}break}});this.onchange=ao.onChange;e.id=(v.id||"hueWheel")+"_canvas";if(a){e.tabIndex=0}z();v.innerHTML="";v.appendChild(e);ax();aG();if(am){f("MSPointerDown",aj);aR("MSPointerMove",ak);aR("MSPointerUp",al)}else{f("mousedown",aj);aR("mousemove",ak);aR("mouseup",al);f("touchstart",aj);f("touchmove",ak);f("touchend",al)}if(aM){f("keydown",U)}function aj(l){E(l);h.cursor="default";A(!1);Q=q.isPointInPath(aS,aT);if(Q){S=!1;k();ay(!0);if(aN){az(!1)}return !1}B(!1);Q=q.isPointInPath(aS,aT);if(Q){S=!0;k();ay(!1);if(aN){az(!0)}return !1}var x=D(aS,aT),g=x.dist,b=x.angle;if(g>av-aK*0.5&&g<av+aK*0.5){H=b*au;if(H<0){H+=360}k();ay(!1);if(aN){az(!1)}aG()}else{if(Y&&g>aw-ah*0.5&&g<aw+ah*0.5){var r=b*au-90;if(r<0){r+=360}ai.hsl(H,aF,r/360);aG()}}return !1}function ak(l){E(l);var x=D(aS,aT),g=x.dist,b=x.angle,r;if(Q){if(!S){if(p&&l.ctrlKey){H=an}else{H=b*au;if(H<0){H+=360}an=H}if(aO){if(g<0){g=0}if(g>av-X){g=av-X}aF=g/(av-X)}}else{ae=((b+0.5*aq)/ar+0.5)%1}aP();k();ay(!S);if(aN){az(S)}aG()}else{A(!1);r=q.isPointInPath(aS,aT);if(r){h.cursor="pointer";return !1}B(!1);r=q.isPointInPath(aS,aT);if(r){h.cursor="pointer";return !1}if(g>av-aK*0.5&&g<av+aK*0.5){h.cursor="crosshair";return !1}h.cursor="default"}return !1}function al(b){j(b);h.cursor="default";Q=!1;ax()}function U(b){var x=b.charCode||b.keyCode,g=b.shiftKey?V:1,l=g*0.01,r=!1;switch(x){case J:H-=K*g;if(H<0){H+=360}r=!0;break;case I:H+=K*g;H%=360;r=!0;break;case aD:if(!aO){return}aF-=aE*l;r=!0;break;case aC:if(!aO){return}aF+=aE*l;r=!0;break;case aa:if(!aN){return}ae+=ab*l;r=!0;break;case Z:if(!aN){return}ae-=ab*l;r=!0;break}if(r){j(b);ai.hsl(H,aF,ae);aG()}}function E(b){j(b);var g=e.getBoundingClientRect(),l=b.targetTouches;T=l&&(am?b.pointerType===b.MSPOINTER_TYPE_TOUCH:!0);if(T&&(l.length===1||(am&&b.isPrimary))){aS=l[0].clientX;aT=l[0].clientY}else{aS=b.clientX;aT=b.clientY}aS-=g.left;aT-=g.top}function j(b){if(b.stopPropagation){b.stopPropagation()}if(b.preventDefault){b.preventDefault()}}function D(l,r){var b=l-i,g=r-i;return{dist:Math.sqrt(b*b+g*g),angle:Math.atan2(g,b)}}function d(){av=(t-aK-ah*3-aI*(aN?1:2))*0.5+1;aw=(t-ah-aI)*0.5+1;ag=ah*0.5;af=[i-1,i+aw];L=[i-aK*0.5,i];X=Math.max(t*W,5)}function z(){var g,r,l,b;d();b=7/(av*aq)*au;e.width=e.height=t;q.lineWidth=aK;for(g=l=-0.01;g<360;g+=b){r=g*s;q.beginPath();q.arc(i,i,av,l,r+0.01);q.strokeStyle="hsl("+g+",100%,50%)";q.stroke();l=r}q.globalCompositeOperation="destination-over";if(aI>0){q.save();q.shadowColor=ao.shadowColor||"#000";q.shadowBlur=aI;q.beginPath();q.arc(i,i,av,0,ar);q.stroke();q.restore()}if(aN){q.lineWidth=ah;for(g=0,l=u;g<360;g+=b){r=g*s+u;q.beginPath();q.arc(i,i,aw,l,r+0.01);q.strokeStyle="hsl(0,0%,+"+g/3.6+"%)";q.stroke();l=r}}q.globalCompositeOperation="source-over";h.backgroundImage="url("+e.toDataURL()+")";q.clearRect(0,0,t,t)}function ay(b){A(!0);if(O){q.shadowColor=ao.shadowColor||"#000";q.shadowBlur=aI}q.lineWidth=1;q.strokeStyle="#000";q.fillStyle=b?N:M;q.fill();q.shadowColor="transparent";q.shadowBlur=0;q.stroke()}function A(b){q.setTransform(1,0,0,1,0,0);q.translate(i,i);q.rotate(H*s);q.translate(-i,-i);var g=i+X+(av-aK*0.5-X)*(aO?aF:1);if(aO&&b){q.lineWidth=1;q.beginPath();q.moveTo(i,i-0.5);q.lineTo(i+av-aK*0.5,i-0.5);q.strokeStyle="#000";q.stroke();q.beginPath();q.moveTo(i,i+0.5);q.lineTo(i+av-aK*0.5,i+0.5);q.strokeStyle="#fff";q.stroke()}q.beginPath();q.moveTo(g-1,i);q.lineTo(g-X,i-X*0.7);q.lineTo(g-X,i+X*0.7);q.closePath()}function az(b){B(!0,b);q.setTransform(1,0,0,1,0,0)}function B(b,g){q.setTransform(1,0,0,1,0,0);q.translate(i,i);q.rotate(ar*ae);q.translate(-i,-i);if(b){q.beginPath();q.arc(af[0],af[1],ag,0,ar);q.closePath();q.fillStyle="#000";q.fill();q.beginPath();q.arc(af[0],af[1],ag-1,0,ar);q.closePath();q.fillStyle=g?ad:ac;q.fill()}else{q.beginPath();q.arc(af[0],af[1],ag,0,ar);q.closePath()}}function ax(){k();ay(!1);if(aN){az(!1)}}function k(){C();q.clearRect(0,0,t,t);if(aJ){var b=(av-aK*0.5)*o;q.beginPath();q.arc(i,i,b,0,ar);q.closePath();q.fillStyle="rgb("+at+","+w+","+c+")";q.fill();q.lineWidth=m;q.strokeStyle=n;q.stroke()}}function C(){var b=R?F(H,aF,ae):G(H,aF,ae);at=b.r;w=b.g;c=b.b}function aG(){clearTimeout(aL);if(ai.onchange){aL=setTimeout(ai.onchange({h:H%360,s:aF,l:ae,v:ae,r:at,g:w,b:c,x:aS,y:aT,isIE:am,isTouch:T}),7)}}function aP(){H%=360;aF=Math.max(0,Math.min(aF,1));ae=Math.max(0,Math.min(ae,1))}function aQ(y,x,l){return{r:Math.max(0,Math.min(y|0,255)),g:Math.max(0,Math.min(x|0,255)),b:Math.max(0,Math.min(l|0,255))}}function G(g,aV,aW){g/=60;var l=g|0,b=g-l,x=aW*(1-aV),y=aW*(1-(aV*b)),r=aW*(1-(aV*(1-b))),aU;if(l===0){aU=[aW,r,x]}else{if(l===1){aU=[y,aW,x]}else{if(l===2){aU=[x,aW,r]}else{if(l===3){aU=[x,y,aW]}else{if(l===4){aU=[r,x,aW]}else{aU=[aW,x,y]}}}}}return aQ(aU[0]*255,aU[1]*255,aU[2]*255)}function F(g,x,r){g/=60;var b=[r+=x*=r<0.5?r:1-r,r-g%1*x*2,r-=x*=2,r,r+g%1*x,r+x];return aQ(b[~~g%6]*255,b[(g|16)%6]*255,b[(g|8)%6]*255)}function aA(aZ,aU,x){aZ/=255;aU/=255;x/=255;var aX=Math.max(aZ,aU,x),aY=Math.min(aZ,aU,x),y=(aX-aY),aV=0,a0=0,aW=(aX+aY)*0.5;if(aX!==aY){if(aW<0.5){a0=y/(aX+aY)}else{a0=y/(2-aX-aY)}if(aZ===aX){aV=(aU-x)/y}else{if(aU===aX){aV=2+(x-aZ)/y}else{aV=4+(aZ-aU)/y}}}aV*=60;if(aV<0){aV+=360}return{h:aV,s:a0,l:aW}}function aB(aX,y,l){aX/=255;y/=255;l/=255;var aU,aY,aZ,x,aW=Math.min(aX,Math.min(y,l)),aV=Math.max(aX,Math.max(y,l));if(aW===aV){aZ=aW;return{h:0,s:0,v:aZ}}x=(aX===aW)?y-l:((l===aW)?aX-y:l-aX);aU=(aX===aW)?3:((l===aW)?1:5);aU=60*(aU-x/(aV-aW));aY=(aV-aW)/aV;aZ=aV;return{h:aU,s:aY,v:aZ}}this.hsl=function(b,y,r){if(!arguments.length){if(R){return{h:H,s:aF,l:ae}}else{var x=G(H,aF,ae),g=aA(x.r,x.g,x.b);return{h:g.h,s:g.s,l:g.l}}}aH(b,y,r);return this};this.hsv=function(b,x,y){var r,l,g;if(!arguments.length){if(R){r=F(H,aF,ae);l=aB(r.r,r.g,r.b);return{h:l.h,s:l.s,v:l.v}}else{return{h:H,s:aF,v:ae}}}r=G(b,x,y);g=aA(r.r,r.g,r.b);aH(g.h,g.s,g.l);return this};function aH(b,r,g){H=b;aF=r;ae=g;aP();ax()}this.rgb=function(aU,x,l){if(!arguments.length){return{h:H,s:aF,l:ae,v:ae}}var aV=aQ(aU,x,l);aU=aV.r;x=aV.g;l=aV.b;var y=(R)?aA(aU,x,l):aB(aU,x,l);H=y.h;aF=y.s;ae=y.l||y.v;aP();ax();aG();return this};function P(b){return(typeof b==="boolean")}this.showColor=function(b){if(!arguments.length){return aJ}aJ=!!b;ax();return this};this.changeLightness=function(b){if(!arguments.length||!P(b)){return aN}aN=b;ah=aN?Math.max(t*0.05,3):0;z();ax();return this};this.changeSaturation=function(b){if(!arguments.length){return aO}aO=!!b;z();ax();return this};this.thicknessHue=function(b){if(!arguments.length){return aK}if(b<3){b=3}if(b>t*0.3){b=(t*0.3)|0}aK=b;z();ax();return this};this.thicknessLightness=function(b){if(!arguments.length){return aK}if(b<3){b=3}if(b>t*0.2){b=(t*0.2)|0}ah=b;z();ax();return this};this.colorSpotRadius=function(b){if(!arguments.length){return o}o=+b;z();ax();return this};this.colorSpace=function(g){if(!arguments.length||(g!=="hsl"&&g!=="hsv")){return R?"hsl":"hsv"}var l,b;if(R&&g==="hsv"){l=F(H,aF,ae);b=aB(l.r,l.g,l.b);H=b.h;aF=b.s;ae=b.v}else{if(!R&&g==="hsl"){l=G(H,aF,ae);b=aA(l.r,l.g,l.b);H=b.h;aF=b.s;ae=b.l}}R=(g==="hsl");ax();aG();return this};this.lightnessClickable=function(b){if(!arguments.length){return Y}Y=!!b;return this};this.ctrlLock=function(b){if(!arguments.length){return p}p=!!b;return this};this.rgb2hsl=aA;this.rgb2hsv=aB;this.hsv2rgb=G;this.hsl2rgb=F};